// ----- Tokens -----
$color-bg: #030712;
$color-card: rgba(17, 24, 39, 0.5);
$color-cyan: #06b6d4;
$color-purple: #7c3aed;
$color-green: #059669;
$color-text-main: #f9fafb;
$color-text-secondary: #9ca3af;
$cyan: #06b6d4;
$violet: #7c3aed;
$green: #059669;
$white: #f9fafb;
$black: #030712;
$gray-dark: #111827;
$gray-medium: #374151;
$blue-dark: #1e3a8a;

$cyan-glow: rgba(6, 182, 212, 0.2);
$violet-glow: rgba(124, 58, 237, 0.3);
$green-glow: rgba(5, 150, 105, 0.25);

.game-container {
  min-height: 100vh;
  background: linear-gradient(to bottom right, #0f172a, #1e3a8a);
  color: $color-text-secondary;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.game-title {
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 1.5rem;
  background: linear-gradient(to right, $color-cyan, $color-purple, $color-green);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

.game-layout {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  width: 100%;
  max-width: 1200px;

  @media (min-width: 768px) {
    flex-direction: row;
  }
}

.board-section {
  flex: 2;
  display: flex;
  justify-content: center;
  align-items: center;
}

.board-placeholder {
  width: 100%;
  aspect-ratio: 1;
  background-color: #111827;
  border: 2px dashed $color-cyan;
  border-radius: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  color: $color-text-secondary;
}

.sidebar {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.card {
  background: $color-card;
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  border: 1px solid rgba($color-cyan, 0.3);
  border-radius: 1rem;
  padding: 1rem;
  color: $color-text-main;
}

.home-button {
    background: linear-gradient(to right, $color-cyan, $color-purple);
    color: #fff;
    border: none;
    padding: 1rem 2rem;
    border-radius: 2rem;
    cursor: pointer;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    transition: transform 0.3s;

    &:hover {
    transform: scale(1.05);
    box-shadow: 0 0 30px $cyan-glow, 0 0 40px $violet-glow;
    }
}

.home-btn-panel {
    width: 450px;
    margin: auto;
    display: flex;
    justify-content: space-around;
}

.cta-stats-wrapper {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 2rem 0;

  .toggle-stats-btn {
    background: linear-gradient(to right, $color-cyan, $color-purple);
    color: #fff;
    border: none;
    padding: 1rem 2rem;
    border-radius: 2rem;
    cursor: pointer;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    transition: transform 0.3s;

    .arrow {
      transition: transform 0.3s;
    }

    .arrow.open {
      transform: rotate(180deg);
    }

        &:hover {
    transform: scale(1.05);
    box-shadow: 0 0 30px $cyan-glow, 0 0 40px $violet-glow;
    }

  }

  .stats-panel-wrapper {
    width: 90%;
    max-width: 900px;
    margin-top: 1rem;
    overflow: hidden;
    max-height: 0;
    transition: max-height 0.4s ease-in-out;

    &.open {
      max-height: 2000px;
    }

    .stats-panel {
      background: rgba(17,24,39,0.6);
      border: 2px solid rgba($color-cyan, 0.2);
      border-radius: 1rem;
      padding: 1rem;

      .stats-content {
        display: flex;
        flex-direction: column;
        gap: 1rem;

        @media(min-width: 768px) {
          flex-direction: row;
        }

        .stats-left, .stats-right { flex: 1; }

        .stats-left {
          display: flex;
          flex-direction: column;
          gap: 1rem;

          select {
            border-radius: 0.5rem;
            border: none;
          }

          .win-rates {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;

            .rate {
              .label {
                font-weight: 600;
                margin-bottom: 0.25rem;
                color: #fff;
              }

              .bar {
                height: 1.5rem;
                border-radius: 0.75rem;
                color: #fff;
                display: flex;
                align-items: center;
                justify-content: flex-end;
                padding: 0 0.5rem;
                font-weight: 600;
                transition: width 0.6s ease-in-out;

                &.ia { background: linear-gradient(to right, $color-purple, #5b21b6); }
                &.player { background: linear-gradient(to right, $color-green, #047857); }
              }
            }
          }
        }

        .stats-right {
          h4 { color: #fff; margin-bottom: 0.5rem; }

          ul {
            list-style: none;
            padding: 0;

            li {
              display: flex;
              justify-content: space-between;
              background: rgba(0,0,0,0.3);
              padding: 0.5rem 1rem;
              margin-bottom: 0.25rem;
              border-radius: 0.5rem;
              color: #fff;

              .rank { width: 2rem; }
              .player-name { flex: 1; padding-left: 0.5rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
              .player-score, .ai-score { width: 3rem; text-align: center; }
              .vs { width: 2rem; text-align: center; }
            }
          }
        }
      }
    }
  }
}

.difficulty-select-wrapper {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
  color: #9ca3af;

  .custom-select {
    position: relative;
    display: inline-block;
    font-weight: 600;

    select {
      appearance: none;
      padding: 0.5rem 2.5rem 0.5rem 1rem;
      border-radius: 1rem;
      border: none;
      cursor: pointer;
      font-weight: 600;
      color: #fff;
      background-color: #111827;
    }

    .arrow {
      position: absolute;
      right: 0.8rem;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
      color: #fff;
      font-size: 0.9rem;
    }

    option {
      padding: 0.5rem 1rem;
      font-weight: 600;
      color: #fff;
      background-color: #111827;
    }
  }
}


.btn-cta {
  width: 100%;
  margin-top: 0.5rem;
  padding: 0.75rem 1rem;
  border: none;
  border-radius: 0.75rem;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  color: white;
  background: linear-gradient(to right, $color-cyan, $color-purple);
  transition: transform 0.2s ease, box-shadow 0.2s ease;

  &:hover {
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba($color-cyan, 0.5);
  }

  &.secondary {
    background: linear-gradient(to right, $color-green, $color-purple);
  }
}

.turn-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 1rem;

  .player-icon {
    width: 2.5rem;
    height: 2.5rem;

    .pawn {
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 50%;
      border: 2px solid transparent;

      &.ia {
        background: linear-gradient(to bottom right, $violet, darken($violet, 20%));
        border-color: rgba(196, 181, 253, 0.5);
      }

      &.player {
        background: linear-gradient(to bottom right, $green, darken($green, 20%));
        border-color: rgba(5, 150, 105, 0.5);
      }
    }
  }

  .turn-text {
    font-weight: 700;
    font-size: 1.1rem;

    &.ia-text { color: $violet; }
    &.player-text { color: $green; }
  }
}

.score-horizontal-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 3rem;
  margin-top: 1rem;

  .side {
    display: flex;
    align-items: center;
    gap: 0.5rem;

    .label-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;

      .label {
        font-size: 0.9rem;
        color: #9ca3af;
      }

      .player-icon {
        width: 3rem;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;

        &.rotate { animation: spin 8s linear infinite; }
        &.rotate-reverse { animation: spin-reverse 8s linear infinite; }

        .pawn {
          width: 3rem;
          height: 3rem;
          border-radius: 50%;
          border: 2px solid transparent;

          &.ia {
            background: linear-gradient(to bottom right, $violet, darken($violet, 20%));
            border-color: rgba(196, 181, 253, 0.5);
          }

          &.player {
            background: linear-gradient(to bottom right, $green, darken($green, 20%));
            border-color: rgba(5, 150, 105, 0.5);
          }
        }
      }
    }

    .score-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #fff;
    }
  }

  .vs-text {
    font-size: 1.5rem;
    font-weight: 800;
    color: $cyan;
  }
}


.possible-moves-badge {
  background: $color-card;
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  border: 1px solid rgba($color-cyan, 0.3);
  border-radius: 1rem;
  padding: 1rem;
  color: $color-text-main;
}

.current-difficulty {
  margin-bottom: 1rem;
  .badge {
    background-color: #06b6d4;
    color: white;
    padding: 0.2rem 0.5rem;
    border-radius: 0.5rem;
    font-weight: 600;
    margin-left: 0.5rem;
  }
}

.difficulty-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;

  &.open {
    opacity: 1;
    pointer-events: auto;
  }

  .modal-content {
    background: #111827;
    padding: 2rem;
    border-radius: 1rem;
    width: 300px;
    position: relative;
    color: white;

    .close-btn {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #fff;
    }

    ul {
      list-style: none;
      padding: 0;
      margin-top: 1rem;

      li {
        padding: 0.5rem 1rem;
        margin-bottom: 0.5rem;
        background: #1f2937;
        border-radius: 0.5rem;
        cursor: pointer;
        text-align: center;

        &:hover {
          background: #374151;
        }
      }
    }
  }
}
.badge {
  color: #fff;
  padding: 0.2rem 0.5rem;
  border-radius: 0.5rem;
  font-weight: 600;
}

.difficulty-modal ul li {
  color: #fff;
  cursor: pointer;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  margin-bottom: 0.5rem;
  text-align: center;

  &:hover {
    opacity: 0.8;
  }
}

.endgame-modal {
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
  padding: 1rem;
}

.endgame-modal .modal-content {
  width: 100%;
  max-width: 420px;
  max-height: 90vh;
  overflow: auto;
  background: $color-card;
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border-radius: 1rem;
  border: 1px solid rgba($color-cyan, 0.36);
  padding: 1.25rem;
  color: $color-text-main;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  box-sizing: border-box;
  animation: fadeInUp 320ms ease;
}

.endgame-modal .modal-content.victory { border-color: $color-green; }
.endgame-modal .modal-content.defeat  { border-color: $color-purple; }
.endgame-modal .modal-content.draw    { border-color: $color-cyan; }

.endgame-header {
  text-align: center;

  h2 {
    font-size: 1.5rem;
    margin-bottom: 0.35rem;
    color: $color-text-main;
  }

  .current-difficulty {
    margin-bottom: 0.5rem;

    .badge {
      display: inline-block;
      color: #fff;
      padding: 0.2rem 0.5rem;
      border-radius: 0.45rem;
      font-weight: 600;
      margin-left: 0.5rem;
      box-shadow: 0 6px 20px rgba(0,0,0,0.35) inset;
    }
  }

  .score-wrapper {
    display:flex;
    align-items:center;
    justify-content:center;
    gap: 1rem;

    .player-score {
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 0.25rem;

      .pawn {
        width:48px;
        height:48px;
        border-radius:50%;
        border:2px solid transparent;
      }
      .pawn.player {
        background: linear-gradient(to bottom right, $color-green, darken($color-green,12%));
        border-color: rgba(5,150,105,0.45);
      }
      .pawn.ia {
        background: linear-gradient(to bottom right, $color-purple, darken($color-purple,12%));
        border-color: rgba(124,58,237,0.35);
      }
      .score-value { font-weight:700; color:$color-text-main; font-size:1.05rem; }
    }

    .vs { font-weight:800; color:$color-cyan; font-size:1rem; }
  }
}

.stats-wrapper {
  display:flex;
  flex-direction:column;
  gap: 1rem;
  background: rgba(17,24,39,0.62);
  border-radius: 0.75rem;
  border: 1px solid rgba($color-cyan, 0.18);
  padding: 0.85rem;
  box-sizing: border-box;
  overflow: hidden;
}

.stats-left {
  display:flex;
  flex-direction:column;
  gap: 0.6rem;
  width: 100%;

  .win-rates {
    display:flex;
    flex-direction:column;
    gap:0.5rem;

    .rate {
      .label { color: $color-text-main; font-weight:700; margin-bottom:0.25rem; }
      .bar {
        height:1.4rem;
        border-radius:0.7rem;
        display:flex;
        align-items:center;
        justify-content:flex-end;
        padding:0 0.5rem;
        color:#fff;
        font-weight:700;
        transition: width 0.45s ease;
      }
      .bar.ia { background: linear-gradient(to right, $color-purple, darken($color-purple, 10%)); }
      .bar.player { background: linear-gradient(to right, $color-green, darken($color-green, 10%)); }
    }
  }

  .total-games { color: $color-text-main; font-weight:600; }
}

.stats-right {
  margin-top: 0.5rem;
  width: 100%;
  position: relative;

  h4 { color: $color-text-main; margin-bottom: 0.45rem; font-size:1rem; }

  .top10-entry-panel {
    background: rgba(0,0,0,0.28);
    border-radius: 0.6rem;
    padding: 0.9rem;
    display:flex;
    flex-direction:column;
    gap:0.6rem;
    text-align:center;

    .input-row input {
      width:100%;
      padding:0.5rem 0.6rem;
      border-radius:0.45rem;
      border:none;
      background: rgba(255,255,255,0.03);
      color: $color-text-main;
      box-sizing:border-box;
    }

    .entry-actions {
      display:flex;
      flex-direction:column;
      gap:0.5rem;

      @media(min-width:420px) { flex-direction:row; }

      .btn-cta { min-height:44px; }
    }
  }

  .panel-viewport {
    overflow:hidden;
    width:100%;

    .panel-slider {
      display:flex;
      transition: transform 360ms cubic-bezier(.2,.9,.2,1);
      will-change: transform;

      .panel {
        flex: 0 0 100%;
        padding: 0.3rem;
        box-sizing: border-box;

        ul { list-style:none; padding:0; margin:0; }

        li {
          display:flex;
          justify-content:space-between;
          align-items:center;
          background: rgba(0,0,0,0.28);
          padding:0.3rem;
          margin-bottom:0.35rem;
          border-radius:0.45rem;
          color:#fff;
          font-size:0.95rem;

          .rank { width:2rem; font-weight:700; }
          .player-name { flex:1; padding:0 0.5rem; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
          .player-score, .ai-score { width:2.5rem; text-align:center; font-weight:700; }
          .vs { width:2rem; text-align:center; color:$color-cyan; }
        }
      }

    }
  }
  .change-difficulty-panel {
    ul li {
      cursor:pointer;
      padding:0.6rem;
      margin-bottom:0.5rem;
      border-radius:0.5rem;
      text-align:center;
      background: rgba(255,255,255,0.02);
      transition: opacity 160ms;
    }
    ul li:hover { opacity: 0.8; }
  }
}

.endgame-buttons {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;

  @media(min-width: 420px) {
    flex-direction: row;
  }

  .btn-cta {
    flex: 1;
    padding: 0.7rem 0.9rem;
    border-radius: 2rem;
    font-weight: 700;
    border: none;
    cursor: pointer;
    color: #fff;
    background: linear-gradient(to right, $color-cyan, $color-purple);
    transition: transform 140ms, box-shadow 140ms, opacity 140ms;

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none !important;
      background: linear-gradient(to right, #555555, #777777); 
      color: #ddd;
    }
  }

  .btn-cta.secondary {
    background: linear-gradient(to right, $color-green, $color-purple);

    &:disabled {
      background: linear-gradient(to right, #555555, #777777); 
      color: #ddd;
    }
  }
}

.error-message {
  color: #ef4444;
  font-size: 0.875rem;
  margin-top: 4px;
}

@media(min-width: 720px) {
  .stats-wrapper {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;

    .stats-left, .stats-right { flex: 1; }
  }

  .endgame-header { h2 { font-size: 1.6rem; } }
}

@keyframes fadeInUp {
  from { opacity:0; transform: translateY(8px); }
  to   { opacity:1; transform: translateY(0); }
}
